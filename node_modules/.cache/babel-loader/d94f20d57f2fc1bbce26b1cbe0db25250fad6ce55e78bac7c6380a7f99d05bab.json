{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Header from\"./Header\";import Footer from\"./Footer\";import Note from\"./Note\";function App(){const[notes,setNotes]=useState([]);const[noteInput,setNoteInput]=useState({title:\"\",content:\"\"});//initialize the notes from database\nuseEffect(()=>{fetch('/api/getAll').then(response=>response.json()).then(data=>{setNotes(data);}).catch(console.error);},[]);//type box state\nfunction record(event){const{name,value}=event.target;setNoteInput(currentInput=>({...currentInput,[name]:value}));}//add note state\nfunction handleAdd(){// event.preventDefault();\nif(noteInput.title&&noteInput.content){const req_options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(noteInput)};console.log(noteInput);fetch('/api/AddNote',req_options).then(response=>response.json()).then(data=>{//backend needs to return the data with id\nsetNotes(oldnotes=>[...oldnotes,data]);setNoteInput({title:\"\",content:\"\"});}).catch(console.error);}}function handleDelete(noteKey){fetch(\"/api/\".concat(noteKey),{method:\"DELETE\"}).then(()=>{setNotes(prev=>prev.filter(note=>note._id!==noteKey));// Optimistically remove the note from state\n}).catch(console.error);}// function handleDelete(noteId) {\n//   fetch(`/api/deleteNote/${noteId}`, {\n//       method: \"DELETE\",\n//       headers: {\n//         \"Content-Type\": \"application/json\",\n//       }\n//   })\n//   .then(response => response.json())\n//   .then(() => {\n//     setNotes(oldNotes => oldNotes.filter(note => note._id !== noteId));\n//   })\n//   .catch(console.error);\n// }\nreturn/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleAdd},/*#__PURE__*/React.createElement(\"input\",{name:\"title\",placeholder:\"Title\",value:noteInput.title,onChange:record}),/*#__PURE__*/React.createElement(\"textarea\",{name:\"content\",placeholder:\"Take a note...\",rows:\"3\",value:noteInput.content,onChange:record}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Add\")),notes.map(note=>/*#__PURE__*/React.createElement(Note//key={note.key}\n,{id:note._id,title:note.title,content:note.content,onDelete:handleDelete})),/*#__PURE__*/React.createElement(Footer,null));}export default App;","map":{"version":3,"names":["React","useEffect","useState","Header","Footer","Note","App","notes","setNotes","noteInput","setNoteInput","title","content","fetch","then","response","json","data","catch","console","error","record","event","name","value","target","currentInput","handleAdd","req_options","method","headers","body","JSON","stringify","log","oldnotes","handleDelete","noteKey","concat","prev","filter","note","_id","createElement","onSubmit","placeholder","onChange","rows","type","map","id","onDelete"],"sources":["/Users/yiyouchen/Documents/googlekeeper/src/components/App.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Note from \"./Note\";\n\nfunction App() {\n  const [notes, setNotes] = useState([]);\n  const [noteInput, setNoteInput] = useState({title: \"\", content: \"\" });\n  //initialize the notes from database\n  useEffect(() => {\n    fetch('/api/getAll').then(\n      response => response.json()\n    ).then(\n      data => {\n        setNotes(data);\n  }).catch(console.error);\n  }, []);\n  //type box state\n  function record(event) {\n    const { name, value } = event.target;\n    setNoteInput((currentInput) => ({ ...currentInput, [name]: value }));\n  }\n  //add note state\n  function handleAdd() {\n    // event.preventDefault();\n    if (noteInput.title && noteInput.content) {\n      const req_options = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(noteInput),\n      };\n      console.log(noteInput);\n      fetch('/api/AddNote', req_options)\n      .then(response => response.json())\n      .then(data => {  //backend needs to return the data with id\n        setNotes(oldnotes => [...oldnotes, data]);\n        setNoteInput({title: \"\", content: \"\"});\n      })\n      .catch(console.error);\n    }\n  }\n  \n  function handleDelete(noteKey) {\n    fetch(`/api/${noteKey}`, { method: \"DELETE\" })\n      .then(() => {\n        setNotes(prev => prev.filter(note => note._id !== noteKey));  // Optimistically remove the note from state\n      })\n      .catch(console.error);\n  }\n  // function handleDelete(noteId) {\n  //   fetch(`/api/deleteNote/${noteId}`, {\n  //       method: \"DELETE\",\n  //       headers: {\n  //         \"Content-Type\": \"application/json\",\n  //       }\n  //   })\n  //   .then(response => response.json())\n  //   .then(() => {\n  //     setNotes(oldNotes => oldNotes.filter(note => note._id !== noteId));\n  //   })\n  //   .catch(console.error);\n  // }\n\n\n  return (\n    <div>\n      <Header />\n      <form onSubmit={handleAdd}>\n        <input\n          name=\"title\"\n          placeholder=\"Title\"\n          value={noteInput.title}\n          onChange={record}\n        />\n        <textarea\n          name=\"content\"\n          placeholder=\"Take a note...\"\n          rows=\"3\"\n          value={noteInput.content}\n          onChange={record}\n        />\n        <button type=\"submit\">Add</button>\n      </form>\n      {notes.map((note) => (\n        <Note\n          //key={note.key}\n          id={note._id}\n          title={note.title}\n          content={note.content}\n          onDelete={handleDelete}\n        />\n      ))}\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
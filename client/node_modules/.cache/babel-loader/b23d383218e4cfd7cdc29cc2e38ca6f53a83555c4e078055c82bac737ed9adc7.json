{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Header from\"./Header\";import Footer from\"./Footer\";import Note from\"./Note\";function App(){const[totnotes,setNotes]=useState([]);const[noteInput,setNoteInput]=useState({title:\"\",content:\"\"});//initialize the notes from database\nuseEffect(()=>{fetch('/NOTES/getAll').then(response=>response.json()).then(data=>{setNotes(data);//console.log(data);\n}).catch(console.error);},[]);//type box state\nfunction record(event){const{name,value}=event.target;setNoteInput(currentInput=>({...currentInput,[name]:value}));}//add note state\nfunction handleAdd(){// event.preventDefault();\nif(noteInput.title&&noteInput.content){const req_options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(noteInput)};console.log(noteInput);fetch('/NOTES/AddNote',req_options).then(response=>response.json()).then(data=>{//backend needs to return the data with id\nsetNotes(oldnotes=>[...oldnotes,data]);console.log('data added',data);setNoteInput({title:\"\",content:\"\"});}).catch(console.error);}}function handleDelete(noteKey){fetch('/NOTES/'+noteKey,{method:\"DELETE\"}).then(()=>{setNotes(prev=>prev.filter(note=>note._id!==noteKey));// Optimistically remove the note from state\n}).catch(console.error);}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleAdd},/*#__PURE__*/React.createElement(\"input\",{name:\"title\",placeholder:\"Title\",value:noteInput.title,onChange:record}),/*#__PURE__*/React.createElement(\"textarea\",{name:\"content\",placeholder:\"Take a note...\",rows:\"3\",value:noteInput.content,onChange:record}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Add\")),totnotes.map(note=>/*#__PURE__*/React.createElement(Note//key={note.key}\n,{id:note._id,title:note.title,content:note.content,onDelete:()=>handleDelete(note._id)})),/*#__PURE__*/React.createElement(Footer,null));}export default App;","map":{"version":3,"names":["React","useEffect","useState","Header","Footer","Note","App","totnotes","setNotes","noteInput","setNoteInput","title","content","fetch","then","response","json","data","catch","console","error","record","event","name","value","target","currentInput","handleAdd","req_options","method","headers","body","JSON","stringify","log","oldnotes","handleDelete","noteKey","prev","filter","note","_id","createElement","onSubmit","placeholder","onChange","rows","type","map","id","onDelete"],"sources":["/Users/fengweizhan/Desktop/Full-Stack-Final-Google-Keeper-main/client/src/components/App.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Note from \"./Note\";\n\n\nfunction App() {\n  const [totnotes, setNotes] = useState([]);\n  const [noteInput, setNoteInput] = useState({title: \"\", content: \"\" });\n    //initialize the notes from database\n  useEffect(() => {\n    fetch('/NOTES/getAll').then(\n      response => response.json()\n    ).then(\n      data => {\n        setNotes(data);\n        //console.log(data);\n  }).catch(console.error);\n  }, []);\n  //type box state\n  function record(event) {\n    const { name, value } = event.target;\n    setNoteInput((currentInput) => ({ ...currentInput, [name]: value }));\n  }\n  //add note state\n  function handleAdd() {\n    // event.preventDefault();\n    if (noteInput.title && noteInput.content) {\n      const req_options = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(noteInput),\n      };\n      console.log(noteInput);\n      fetch('/NOTES/AddNote', req_options)\n      .then(response => response.json())\n      .then(data => {  //backend needs to return the data with id\n        setNotes(oldnotes => [...oldnotes, data]);\n        console.log('data added', data);\n        setNoteInput({title: \"\", content: \"\"});\n      })\n      .catch(console.error);\n    }\n  }\n  \n  function handleDelete(noteKey) {\n    fetch('/NOTES/'+noteKey, { method: \"DELETE\" })\n      .then(() => {\n        setNotes(prev => prev.filter(note => note._id !== noteKey));  // Optimistically remove the note from state\n      })\n      .catch(console.error);\n  }\n\n  return (\n    <div>\n      <Header />\n      <form onSubmit={handleAdd}>\n        <input\n          name=\"title\"\n          placeholder=\"Title\"\n          value={noteInput.title}\n          onChange={record}\n        />\n        <textarea\n          name=\"content\"\n          placeholder=\"Take a note...\"\n          rows=\"3\"\n          value={noteInput.content}\n          onChange={record}\n        />\n        <button type=\"submit\">Add</button>\n      </form>\n      {totnotes.map((note) => (\n        <Note\n          //key={note.key}\n          id={note._id}\n          title={note.title}\n          content={note.content}\n          onDelete={() => handleDelete(note._id)}\n        />\n      ))}\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}